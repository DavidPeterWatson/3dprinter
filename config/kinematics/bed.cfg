[bed_mesh]
speed: 120
horizontal_move_z: 0.5
mesh_min: 40, 0
mesh_max: 270, 320
probe_count: 10, 10
algorithm: bicubic
fade_start: 1
fade_end: 5
fade_target: 0
adaptive_margin: 40


[quad_gantry_level]
gantry_corners:
  -90, 10
  600, 700
points:
  -32, 5
  -32, 675
  535, 675
  535, 5
speed: 100
horizontal_move_z: 10
max_adjust: 10


[gcode_macro Align_Bed]
gcode:
    CHECK_HOMED
    LOAD_BED_PROBE
    QUAD_GANTRY_LEVEL
    UNLOAD_BED_PROBE
    M18 # Bed is not homed anymore. Turn off motors to prevent crashing
    CHECK_HOMED


[gcode_macro CALIBRATE_BED]
gcode:
    LOAD_BED_PROBE
    MOVE_TO_SAFE_ORIGIN
    BED_MESH_CALIBRATE ADAPTIVE=1
    Move_To_Safe_Z


[gcode_macro MOVE_TO_SAFE_ORIGIN]
gcode:
    SAVE_GCODE_STATE NAME=MOVE_TO_SAFE_ORIGIN_STATE
    Move_To_Safe_Z
    USE_ABSOLUTE_POSITIONING
    USE_MAX_VELOCITY
    G0 X40 Y0
    RESTORE_GCODE_STATE NAME=MOVE_TO_SAFE_ORIGIN_STATE
